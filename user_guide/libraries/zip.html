
<!DOCTYPE html>


<html>
	<head>
		<meta charset="utf-8">
	    
	    <title>Zip Encoding Class &mdash; CodeIgniter 3.0-dev documentation</title>

	    <link rel="stylesheet" href="../_static/asset/css/common.css" type="text/css" />
	    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
	    <script type="text/javascript">
	      var DOCUMENTATION_OPTIONS = {
	        URL_ROOT:    '../',
	        VERSION:     '3.0-dev',
	        COLLAPSE_INDEX: false,
	        FILE_SUFFIX: '.html',
	        HAS_SOURCE:  true
	      };
	    </script>
	    <script type="text/javascript" src="../_static/jquery.js"></script>
	    <script type="text/javascript" src="../_static/underscore.js"></script>
	    <script type="text/javascript" src="../_static/doctools.js"></script>
	    <link rel="top" title="CodeIgniter 3.0-dev documentation" href="../index.html" />
	    <link rel="up" title="Libraries" href="index.html" />
	    <link rel="next" title="Helpers" href="../helpers/index.html" />
	    <link rel="prev" title="XML-RPC and XML-RPC Server Classes" href="xmlrpc.html" /> 
	</head>
	<body>
		<div id="table-contents">
			<div class="toctree-wrapper compound">
			<ul>
<li class="toctree-l1"><a class="reference internal" href="../general/index.html">General Topics</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Libraries</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="benchmark.html">Benchmarking Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="caching.html">Caching Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="calendar.html">Calendaring Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="cart.html">Shopping Cart Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html">Config Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="email.html">Email Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="encryption.html">Encryption Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="file_uploading.html">File Uploading Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="form_validation.html">Form Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="ftp.html">FTP Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="image_lib.html">Image Manipulation Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="input.html">Input Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="javascript.html">Javascript Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="language.html">Language Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="loader.html">Loader Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration.html">Migrations Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="output.html">Output Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="pagination.html">Pagination Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="parser.html">Template Parser Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html">Security Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="sessions.html">Session Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="table.html">HTML Table Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="trackback.html">Trackback Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="typography.html">Typography Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="unit_testing.html">Unit Testing Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="uri.html">URI Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_agent.html">User Agent Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="xmlrpc.html">XML-RPC and XML-RPC Server Classes</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Zip Encoding Class</a><ul class="simple">
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../helpers/index.html">Helpers</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing to CodeIgniter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DCO.html">Developer&#8217;s Certificate of Origin 1.1</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../DCO.html">Developer&#8217;s Certificate of Origin 1.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Change Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">Open Software License (&#8220;OSL&#8221;) v 3.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license_afl.html">Academic Free License (&#8220;AFL&#8221;) v 3.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">CodeIgniter Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/requirements.html">Server Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/welcome.html">Welcome to CodeIgniter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/index.html">General Topics</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Libraries</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="benchmark.html">Benchmarking Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="caching.html">Caching Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="calendar.html">Calendaring Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="cart.html">Shopping Cart Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html">Config Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="email.html">Email Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="encryption.html">Encryption Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="file_uploading.html">File Uploading Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="form_validation.html">Form Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="ftp.html">FTP Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="image_lib.html">Image Manipulation Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="input.html">Input Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="javascript.html">Javascript Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="language.html">Language Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="loader.html">Loader Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="migration.html">Migrations Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="output.html">Output Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="pagination.html">Pagination Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="parser.html">Template Parser Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html">Security Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="sessions.html">Session Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="table.html">HTML Table Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="trackback.html">Trackback Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="typography.html">Typography Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="unit_testing.html">Unit Testing Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="uri.html">URI Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_agent.html">User Agent Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="xmlrpc.html">XML-RPC and XML-RPC Server Classes</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Zip Encoding Class</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../helpers/index.html">Helpers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../database/index.html">The Database Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation/index.html">Writing CodeIgniter Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/quick_reference.html">Quick Reference Chart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/credits.html">Credits</a></li>
</ul>

			</div>
		</div>

		<div id="brand" class="ci">
			<a href="http://codeigniter.com/"><img src="../_static/asset/img/ci-logo.gif" alt="CodeIgniter"></a>
			<p>3.0-dev User Guide</p>
		</div><!-- /#brand -->

		<div id="header">
			<form method="get" action="http://www.google.com/search">
				<fieldset>
					<input type="text" name="q" id="q" value="">
					<input type="hidden" name="as_sitesearch" id="as_sitesearch" value="codeigniter.com/user_guide/" />
					<input class="grades" type="submit" value="search">
				</fieldset>
			</form>
			<ul>
				<li><a href="../index.html">User Guide Home</a>&nbsp;&nbsp; &rsaquo;</li>
				<li><a href="index.html" accesskey="U">Libraries</a>&nbsp;&nbsp;  &rsaquo;</li>
				<li><strong>Zip Encoding Class</strong></li>
			</ul>
		</div><!-- /#header -->

		<div class="section" id="content">
			<div class="section" id="zip-encoding-class">
<h1>Zip Encoding Class<a class="headerlink" href="#zip-encoding-class" title="Permalink to this headline">¶</a></h1>
<p>CodeIgniter&#8217;s Zip Encoding Class classes permit you to create Zip
archives. Archives can be downloaded to your desktop or saved to a
directory.</p>
<div class="section" id="initializing-the-class">
<h2>Initializing the Class<a class="headerlink" href="#initializing-the-class" title="Permalink to this headline">¶</a></h2>
<p>Like most other classes in CodeIgniter, the Zip class is initialized in
your controller using the $this-&gt;load-&gt;library function:</p>
<div class="highlight-ci"><pre>$this-&gt;load-&gt;library('zip');</pre>
</div>
<p>Once loaded, the Zip library object will be available using: $this-&gt;zip</p>
</div>
<div class="section" id="usage-example">
<h2>Usage Example<a class="headerlink" href="#usage-example" title="Permalink to this headline">¶</a></h2>
<p>This example demonstrates how to compress a file, save it to a folder on
your server, and download it to your desktop.</p>
<div class="highlight-ci"><pre>$name = 'mydata1.txt';
$data = 'A Data String!';

$this-&gt;zip-&gt;add_data($name, $data);

// Write the zip file to a folder on your server. Name it "my_backup.zip"
$this-&gt;zip-&gt;archive('/path/to/directory/my_backup.zip');

// Download the file to your desktop. Name it "my_backup.zip"
$this-&gt;zip-&gt;download('my_backup.zip');</pre>
</div>
<div class="section" id="function-reference">
<h3>Function Reference<a class="headerlink" href="#function-reference" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="this-zip-add-data">
<h2>$this-&gt;zip-&gt;add_data()<a class="headerlink" href="#this-zip-add-data" title="Permalink to this headline">¶</a></h2>
<p>Permits you to add data to the Zip archive. The first parameter must
contain the name you would like given to the file, the second parameter
must contain the file data as a string:</p>
<div class="highlight-ci"><pre>$name = 'my_bio.txt';
$data = 'I was born in an elevator...';

$this-&gt;zip-&gt;add_data($name, $data);</pre>
</div>
<p>You are allowed multiple calls to this function in order to add several
files to your archive. Example:</p>
<div class="highlight-ci"><pre>$name = 'mydata1.txt';
$data = 'A Data String!';
$this-&gt;zip-&gt;add_data($name, $data);

$name = 'mydata2.txt';
$data = 'Another Data String!';
$this-&gt;zip-&gt;add_data($name, $data);</pre>
</div>
<p>Or you can pass multiple files using an array:</p>
<div class="highlight-ci"><pre>$data = array(
                'mydata1.txt' =&gt; 'A Data String!',
                'mydata2.txt' =&gt; 'Another Data String!'
            );

$this-&gt;zip-&gt;add_data($data);

$this-&gt;zip-&gt;download('my_backup.zip');</pre>
</div>
<p>If you would like your compressed data organized into sub-folders,
include the path as part of the filename:</p>
<div class="highlight-ci"><pre>$name = 'personal/my_bio.txt';
$data = 'I was born in an elevator...';

$this-&gt;zip-&gt;add_data($name, $data);</pre>
</div>
<p>The above example will place my_bio.txt inside a folder called
personal.</p>
</div>
<div class="section" id="this-zip-add-dir">
<h2>$this-&gt;zip-&gt;add_dir()<a class="headerlink" href="#this-zip-add-dir" title="Permalink to this headline">¶</a></h2>
<p>Permits you to add a directory. Usually this function is unnecessary
since you can place your data into folders when using
$this-&gt;zip-&gt;add_data(), but if you would like to create an empty folder
you can do so. Example:</p>
<div class="highlight-ci"><pre>$this-&gt;zip-&gt;add_dir('myfolder'); // Creates a folder called "myfolder"</pre>
</div>
</div>
<div class="section" id="this-zip-read-file">
<h2>$this-&gt;zip-&gt;read_file()<a class="headerlink" href="#this-zip-read-file" title="Permalink to this headline">¶</a></h2>
<p>Permits you to compress a file that already exists somewhere on your
server. Supply a file path and the zip class will read it and add it to
the archive:</p>
<div class="highlight-ci"><pre>$path = '/path/to/photo.jpg';

$this-&gt;zip-&gt;read_file($path);

// Download the file to your desktop. Name it "my_backup.zip"
$this-&gt;zip-&gt;download('my_backup.zip');</pre>
</div>
<p>If you would like the Zip archive to maintain the directory structure of
the file in it, pass TRUE (boolean) in the second parameter. Example:</p>
<div class="highlight-ci"><pre>$path = '/path/to/photo.jpg';

$this-&gt;zip-&gt;read_file($path, TRUE);

// Download the file to your desktop. Name it "my_backup.zip"
$this-&gt;zip-&gt;download('my_backup.zip');</pre>
</div>
<p>In the above example, photo.jpg will be placed inside two folders:
path/to/</p>
</div>
<div class="section" id="this-zip-read-dir">
<h2>$this-&gt;zip-&gt;read_dir()<a class="headerlink" href="#this-zip-read-dir" title="Permalink to this headline">¶</a></h2>
<p>Permits you to compress a folder (and its contents) that already exists
somewhere on your server. Supply a file path to the directory and the
zip class will recursively read it and recreate it as a Zip archive. All
files contained within the supplied path will be encoded, as will any
sub-folders contained within it. Example:</p>
<div class="highlight-ci"><pre>$path = '/path/to/your/directory/';

$this-&gt;zip-&gt;read_dir($path);

// Download the file to your desktop. Name it "my_backup.zip"
$this-&gt;zip-&gt;download('my_backup.zip');</pre>
</div>
<p>By default the Zip archive will place all directories listed in the
first parameter inside the zip. If you want the tree preceding the
target folder to be ignored you can pass FALSE (boolean) in the second
parameter. Example:</p>
<div class="highlight-ci"><pre>$path = '/path/to/your/directory/';

$this-&gt;zip-&gt;read_dir($path, FALSE);</pre>
</div>
<p>This will create a ZIP with the folder &#8220;directory&#8221; inside, then all
sub-folders stored correctly inside that, but will not include the
folders /path/to/your.</p>
</div>
<div class="section" id="this-zip-archive">
<h2>$this-&gt;zip-&gt;archive()<a class="headerlink" href="#this-zip-archive" title="Permalink to this headline">¶</a></h2>
<p>Writes the Zip-encoded file to a directory on your server. Submit a
valid server path ending in the file name. Make sure the directory is
writable (666 or 777 is usually OK). Example:</p>
<div class="highlight-ci"><pre>$this-&gt;zip-&gt;archive('/path/to/folder/myarchive.zip'); // Creates a file named myarchive.zip</pre>
</div>
</div>
<div class="section" id="this-zip-download">
<h2>$this-&gt;zip-&gt;download()<a class="headerlink" href="#this-zip-download" title="Permalink to this headline">¶</a></h2>
<p>Causes the Zip file to be downloaded from your server. The function must
be passed the name you would like the zip file called. Example:</p>
<div class="highlight-ci"><pre>$this-&gt;zip-&gt;download('latest_stuff.zip'); // File will be named "latest_stuff.zip"</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Do not display any data in the controller in which you call
this function since it sends various server headers that cause the
download to happen and the file to be treated as binary.</p>
</div>
</div>
<div class="section" id="this-zip-get-zip">
<h2>$this-&gt;zip-&gt;get_zip()<a class="headerlink" href="#this-zip-get-zip" title="Permalink to this headline">¶</a></h2>
<p>Returns the Zip-compressed file data. Generally you will not need this
function unless you want to do something unique with the data. Example:</p>
<div class="highlight-ci"><pre>$name = 'my_bio.txt';
$data = 'I was born in an elevator...';

$this-&gt;zip-&gt;add_data($name, $data);

$zip_file = $this-&gt;zip-&gt;get_zip();</pre>
</div>
</div>
<div class="section" id="this-zip-clear-data">
<h2>$this-&gt;zip-&gt;clear_data()<a class="headerlink" href="#this-zip-clear-data" title="Permalink to this headline">¶</a></h2>
<p>The Zip class caches your zip data so that it doesn&#8217;t need to recompile
the Zip archive for each function you use above. If, however, you need
to create multiple Zips, each with different data, you can clear the
cache between calls. Example:</p>
<div class="highlight-ci"><pre>$name = 'my_bio.txt';
$data = 'I was born in an elevator...';

$this-&gt;zip-&gt;add_data($name, $data);
$zip_file = $this-&gt;zip-&gt;get_zip();

$this-&gt;zip-&gt;clear_data();

$name = 'photo.jpg';
$this-&gt;zip-&gt;read_file("/path/to/photo.jpg"); // Read the file's contents


$this-&gt;zip-&gt;download('myphotos.zip');</pre>
</div>
</div>
</div>

		</div>

		<!-- {user_guide_comments} -->
					
		<div id="footer">
			<p class="top"><a href="#header" title="Return to top">Return to top</a></p>
			<p><a href="">CodeIgniter</a> &ndash; Copyright &copy; 2012, EllisLab, Inc.</a></p>
		</div><!-- /#footer -->
	</body>
</html>