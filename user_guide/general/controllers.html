
<!DOCTYPE html>


<html>
	<head>
		<meta charset="utf-8">
	    
	    <title>Controllers &mdash; CodeIgniter 3.0-dev documentation</title>

	    <link rel="stylesheet" href="../_static/asset/css/common.css" type="text/css" />
	    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
	    <script type="text/javascript">
	      var DOCUMENTATION_OPTIONS = {
	        URL_ROOT:    '../',
	        VERSION:     '3.0-dev',
	        COLLAPSE_INDEX: false,
	        FILE_SUFFIX: '.html',
	        HAS_SOURCE:  true
	      };
	    </script>
	    <script type="text/javascript" src="../_static/jquery.js"></script>
	    <script type="text/javascript" src="../_static/underscore.js"></script>
	    <script type="text/javascript" src="../_static/doctools.js"></script>
	    <link rel="top" title="CodeIgniter 3.0-dev documentation" href="../index.html" />
	    <link rel="up" title="General Topics" href="index.html" />
	    <link rel="next" title="Reserved Names" href="reserved_names.html" />
	    <link rel="prev" title="CodeIgniter URLs" href="urls.html" /> 
	</head>
	<body>
		<div id="table-contents">
			<div class="toctree-wrapper compound">
			<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">General Topics</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="urls.html">CodeIgniter URLs</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Controllers</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reserved_names.html">Reserved Names</a></li>
<li class="toctree-l2"><a class="reference internal" href="views.html">Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="models.html">Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="helpers.html">Helpers</a></li>
<li class="toctree-l2"><a class="reference internal" href="libraries.html">Using CodeIgniter Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="creating_libraries.html">Creating Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="drivers.html">Using CodeIgniter Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="creating_drivers.html">Creating Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="core_classes.html">Creating Core System Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="ancillary_classes.html">Creating Ancillary Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="hooks.html">Hooks - Extending the Framework Core</a></li>
<li class="toctree-l2"><a class="reference internal" href="autoloader.html">Auto-loading Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="common_functions.html">Common Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="routing.html">URI Routing</a></li>
<li class="toctree-l2"><a class="reference internal" href="errors.html">Error Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="caching.html">Caching</a></li>
<li class="toctree-l2"><a class="reference internal" href="profiling.html">Profiling Your Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html">Running via the CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="managing_apps.html">Managing your Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="environments.html">Handling Multiple Environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="alternative_php.html">Alternate PHP Syntax for View Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="styleguide.html">PHP Style Guide</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../libraries/index.html">Libraries</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../helpers/index.html">Helpers</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing to CodeIgniter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DCO.html">Developer&#8217;s Certificate of Origin 1.1</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../DCO.html">Developer&#8217;s Certificate of Origin 1.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Change Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">Open Software License (&#8220;OSL&#8221;) v 3.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license_afl.html">Academic Free License (&#8220;AFL&#8221;) v 3.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html">CodeIgniter Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="requirements.html">Server Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="welcome.html">Welcome to CodeIgniter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation Instructions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">General Topics</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="urls.html">CodeIgniter URLs</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Controllers</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reserved_names.html">Reserved Names</a></li>
<li class="toctree-l2"><a class="reference internal" href="views.html">Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="models.html">Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="helpers.html">Helpers</a></li>
<li class="toctree-l2"><a class="reference internal" href="libraries.html">Using CodeIgniter Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="creating_libraries.html">Creating Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="drivers.html">Using CodeIgniter Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="creating_drivers.html">Creating Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="core_classes.html">Creating Core System Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="ancillary_classes.html">Creating Ancillary Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="hooks.html">Hooks - Extending the Framework Core</a></li>
<li class="toctree-l2"><a class="reference internal" href="autoloader.html">Auto-loading Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="common_functions.html">Common Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="routing.html">URI Routing</a></li>
<li class="toctree-l2"><a class="reference internal" href="errors.html">Error Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="caching.html">Caching</a></li>
<li class="toctree-l2"><a class="reference internal" href="profiling.html">Profiling Your Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html">Running via the CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="managing_apps.html">Managing your Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="environments.html">Handling Multiple Environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="alternative_php.html">Alternate PHP Syntax for View Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="styleguide.html">PHP Style Guide</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../libraries/index.html">Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../helpers/index.html">Helpers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../database/index.html">The Database Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation/index.html">Writing CodeIgniter Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="quick_reference.html">Quick Reference Chart</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Credits</a></li>
</ul>

			</div>
		</div>

		<div id="brand" class="ci">
			<a href="http://codeigniter.com/"><img src="../_static/asset/img/ci-logo.gif" alt="CodeIgniter"></a>
			<p>3.0-dev User Guide</p>
		</div><!-- /#brand -->

		<div id="header">
			<form method="get" action="http://www.google.com/search">
				<fieldset>
					<input type="text" name="q" id="q" value="">
					<input type="hidden" name="as_sitesearch" id="as_sitesearch" value="codeigniter.com/user_guide/" />
					<input class="grades" type="submit" value="search">
				</fieldset>
			</form>
			<ul>
				<li><a href="../index.html">User Guide Home</a>&nbsp;&nbsp; &rsaquo;</li>
				<li><a href="index.html" accesskey="U">General Topics</a>&nbsp;&nbsp;  &rsaquo;</li>
				<li><strong>Controllers</strong></li>
			</ul>
		</div><!-- /#header -->

		<div class="section" id="content">
			<div class="section" id="controllers">
<h1><a class="toc-backref" href="#id1">Controllers</a><a class="headerlink" href="#controllers" title="Permalink to this headline">Â¶</a></h1>
<p>Controllers are the heart of your application, as they determine how
HTTP requests should be handled.</p>
<div class="contents topic" id="page-contents">
<p class="topic-title first">Page Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#controllers" id="id1">Controllers</a><ul>
<li><a class="reference internal" href="#what-is-a-controller" id="id2">What is a Controller?</a></li>
<li><a class="reference internal" href="#let-s-try-it-hello-world" id="id3">Let&#8217;s try it: Hello World!</a></li>
<li><a class="reference internal" href="#functions" id="id4">Functions</a></li>
<li><a class="reference internal" href="#passing-uri-segments-to-your-functions" id="id5">Passing URI Segments to your Functions</a></li>
<li><a class="reference internal" href="#defining-a-default-controller" id="id6">Defining a Default Controller</a></li>
<li><a class="reference internal" href="#remapping-function-calls" id="id7">Remapping Function Calls</a></li>
<li><a class="reference internal" href="#processing-output" id="id8">Processing Output</a></li>
<li><a class="reference internal" href="#private-functions" id="id9">Private Functions</a></li>
<li><a class="reference internal" href="#organizing-your-controllers-into-sub-folders" id="id10">Organizing Your Controllers into Sub-folders</a></li>
<li><a class="reference internal" href="#class-constructors" id="id11">Class Constructors</a></li>
<li><a class="reference internal" href="#reserved-function-names" id="id12">Reserved Function Names</a></li>
<li><a class="reference internal" href="#that-s-it" id="id13">That&#8217;s it!</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="what-is-a-controller">
<h2><a class="toc-backref" href="#id2">What is a Controller?</a><a class="headerlink" href="#what-is-a-controller" title="Permalink to this headline">Â¶</a></h2>
<p><strong>A Controller is simply a class file that is named in a way that can be
associated with a URI.</strong></p>
<p>Consider this URI:</p>
<div class="highlight-ci"><pre>example.com/index.php/blog/</pre>
</div>
<p>In the above example, CodeIgniter would attempt to find a controller
named blog.php and load it.</p>
<p><strong>When a controller&#8217;s name matches the first segment of a URI, it will
be loaded.</strong></p>
</div>
<div class="section" id="let-s-try-it-hello-world">
<h2><a class="toc-backref" href="#id3">Let&#8217;s try it: Hello World!</a><a class="headerlink" href="#let-s-try-it-hello-world" title="Permalink to this headline">Â¶</a></h2>
<p>Let&#8217;s create a simple controller so you can see it in action. Using your
text editor, create a file called blog.php, and put the following code
in it:</p>
<div class="highlight-ci"><pre>&lt;?php
class Blog extends CI_Controller {

        public function index()
        {
                echo 'Hello World!';
        }
}
?&gt;</pre>
</div>
<p>Then save the file to your application/controllers/ folder.</p>
<p>Now visit the your site using a URL similar to this:</p>
<div class="highlight-ci"><pre>example.com/index.php/blog/</pre>
</div>
<p>If you did it right, you should see Hello World!.</p>
<p>Note: Class names must start with an uppercase letter. In other words,
this is valid:</p>
<div class="highlight-ci"><pre>&lt;?php
class Blog extends CI_Controller {

}
?&gt;</pre>
</div>
<p>This is <strong>not</strong> valid:</p>
<div class="highlight-ci"><pre>&lt;?php
class blog extends CI_Controller {

}
?&gt;</pre>
</div>
<p>Also, always make sure your controller extends the parent controller
class so that it can inherit all its functions.</p>
</div>
<div class="section" id="functions">
<h2><a class="toc-backref" href="#id4">Functions</a><a class="headerlink" href="#functions" title="Permalink to this headline">Â¶</a></h2>
<p>In the above example the function name is index(). The &#8220;index&#8221; function
is always loaded by default if the <strong>second segment</strong> of the URI is
empty. Another way to show your &#8220;Hello World&#8221; message would be this:</p>
<div class="highlight-ci"><pre>example.com/index.php/blog/index/</pre>
</div>
<p><strong>The second segment of the URI determines which function in the
controller gets called.</strong></p>
<p>Let&#8217;s try it. Add a new function to your controller:</p>
<div class="highlight-ci"><pre>&lt;?php
class Blog extends CI_Controller {

        public function index()
        {
                echo 'Hello World!';
        }

        public function comments()
        {
                echo 'Look at this!';
        }
}
?&gt;</pre>
</div>
<p>Now load the following URL to see the comment function:</p>
<div class="highlight-ci"><pre>example.com/index.php/blog/comments/</pre>
</div>
<p>You should see your new message.</p>
</div>
<div class="section" id="passing-uri-segments-to-your-functions">
<h2><a class="toc-backref" href="#id5">Passing URI Segments to your Functions</a><a class="headerlink" href="#passing-uri-segments-to-your-functions" title="Permalink to this headline">Â¶</a></h2>
<p>If your URI contains more then two segments they will be passed to your
function as parameters.</p>
<p>For example, lets say you have a URI like this:</p>
<div class="highlight-ci"><pre>example.com/index.php/products/shoes/sandals/123</pre>
</div>
<p>Your function will be passed URI segments 3 and 4 (&#8220;sandals&#8221; and &#8220;123&#8221;):</p>
<div class="highlight-ci"><pre>&lt;?php
class Products extends CI_Controller {

    public function shoes($sandals, $id)
    {
        echo $sandals;
        echo $id;
    }
}
?&gt;</pre>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">If you are using the <a class="reference internal" href="routing.html"><em>URI Routing</em></a>
feature, the segments passed to your function will be the re-routed
ones.</p>
</div>
</div>
<div class="section" id="defining-a-default-controller">
<h2><a class="toc-backref" href="#id6">Defining a Default Controller</a><a class="headerlink" href="#defining-a-default-controller" title="Permalink to this headline">Â¶</a></h2>
<p>CodeIgniter can be told to load a default controller when a URI is not
present, as will be the case when only your site root URL is requested.
To specify a default controller, open your <strong>application/config/routes.php</strong>
file and set this variable:</p>
<div class="highlight-ci"><pre>$route['default_controller'] = 'Blog';</pre>
</div>
<p>Where Blog is the name of the controller class you want used. If you now
load your main index.php file without specifying any URI segments you&#8217;ll
see your Hello World message by default.</p>
</div>
<div class="section" id="remapping-function-calls">
<h2><a class="toc-backref" href="#id7">Remapping Function Calls</a><a class="headerlink" href="#remapping-function-calls" title="Permalink to this headline">Â¶</a></h2>
<p>As noted above, the second segment of the URI typically determines which
function in the controller gets called. CodeIgniter permits you to
override this behavior through the use of the _remap() function:</p>
<div class="highlight-ci"><pre>public function _remap()
{
    // Some code here...
}</pre>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">If your controller contains a function named _remap(),
it will <strong>always</strong> get called regardless of what your URI contains. It
overrides the normal behavior in which the URI determines which function
is called, allowing you to define your own function routing rules.</p>
</div>
<p>The overridden function call (typically the second segment of the URI)
will be passed as a parameter to the _remap() function:</p>
<div class="highlight-ci"><pre>public function _remap($method)
{
    if ($method == 'some_method')
    {
        $this-&gt;$method();
    }
    else
    {
        $this-&gt;default_method();
    }
}</pre>
</div>
<p>Any extra segments after the method name are passed into _remap() as an
optional second parameter. This array can be used in combination with
PHP&#8217;s <a class="reference external" href="http://php.net/call_user_func_array">call_user_func_array</a>
to emulate CodeIgniter&#8217;s default behavior.</p>
<div class="highlight-ci"><pre>public function _remap($method, $params = array())
{
    $method = 'process_'.$method;
    if (method_exists($this, $method))
    {
        return call_user_func_array(array($this, $method), $params);
    }
    show_404();
}</pre>
</div>
</div>
<div class="section" id="processing-output">
<h2><a class="toc-backref" href="#id8">Processing Output</a><a class="headerlink" href="#processing-output" title="Permalink to this headline">Â¶</a></h2>
<p>CodeIgniter has an output class that takes care of sending your final
rendered data to the web browser automatically. More information on this
can be found in the <a class="reference internal" href="views.html"><em>Views</em></a> and <a class="reference internal" href="../libraries/output.html"><em>Output class</em></a> pages. In some cases, however, you
might want to post-process the finalized data in some way and send it to
the browser yourself. CodeIgniter permits you to add a function named
_output() to your controller that will receive the finalized output
data.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">If your controller contains a function named _output(),
it will <strong>always</strong> be called by the output class instead of echoing the
finalized data directly. The first parameter of the function will
contain the finalized output.</p>
</div>
<p>Here is an example:</p>
<div class="highlight-ci"><pre>public function _output($output)
{
    echo $output;
}</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Please note that your _output() function will receive the data in its
finalized state. Benchmark and memory usage data will be rendered, cache
files written (if you have caching enabled), and headers will be sent
(if you use that <a class="reference internal" href="../libraries/output.html"><em>feature</em></a>) before it is
handed off to the _output() function.
To have your controller&#8217;s output cached properly, its _output() method
can use:</p>
<div class="highlight-ci"><pre>if ($this-&gt;output-&gt;cache_expiration &gt; 0)
{
    $this-&gt;output-&gt;_write_cache($output);
}</pre>
</div>
<p class="last">If you are using this feature the page execution timer and memory usage
stats might not be perfectly accurate since they will not take into
acccount any further processing you do. For an alternate way to control
output <em>before</em> any of the final processing is done, please see the
available methods in the <a class="reference internal" href="../libraries/output.html"><em>Output Class</em></a>.</p>
</div>
</div>
<div class="section" id="private-functions">
<h2><a class="toc-backref" href="#id9">Private Functions</a><a class="headerlink" href="#private-functions" title="Permalink to this headline">Â¶</a></h2>
<p>In some cases you may want certain functions hidden from public access.
To make a function private, simply add an underscore as the name prefix
and it will not be served via a URL request. For example, if you were to
have a function like this:</p>
<div class="highlight-ci"><pre>private function _utility()
{
  // some code
}</pre>
</div>
<p>Trying to access it via the URL, like this, will not work:</p>
<div class="highlight-ci"><pre>example.com/index.php/blog/_utility/</pre>
</div>
</div>
<div class="section" id="organizing-your-controllers-into-sub-folders">
<h2><a class="toc-backref" href="#id10">Organizing Your Controllers into Sub-folders</a><a class="headerlink" href="#organizing-your-controllers-into-sub-folders" title="Permalink to this headline">Â¶</a></h2>
<p>If you are building a large application you might find it convenient to
organize your controllers into sub-folders. CodeIgniter permits you to
do this.</p>
<p>Simply create folders within your application/controllers directory and
place your controller classes within them.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>When using this feature the first segment of your URI must
specify the folder. For example, lets say you have a controller located
here:</p>
<div class="highlight-ci"><pre>application/controllers/products/shoes.php</pre>
</div>
<p>To call the above controller your URI will look something like this:</p>
<div class="last highlight-ci"><pre>example.com/index.php/products/shoes/show/123</pre>
</div>
</div>
<p>Each of your sub-folders may contain a default controller which will be
called if the URL contains only the sub-folder. Simply name your default
controller as specified in your application/config/routes.php file</p>
<p>CodeIgniter also permits you to remap your URIs using its <a class="reference internal" href="routing.html"><em>URI
Routing</em></a> feature.</p>
</div>
<div class="section" id="class-constructors">
<h2><a class="toc-backref" href="#id11">Class Constructors</a><a class="headerlink" href="#class-constructors" title="Permalink to this headline">Â¶</a></h2>
<p>If you intend to use a constructor in any of your Controllers, you
<strong>MUST</strong> place the following line of code in it:</p>
<div class="highlight-ci"><pre>parent::__construct();</pre>
</div>
<p>The reason this line is necessary is because your local constructor will
be overriding the one in the parent controller class so we need to
manually call it.</p>
<div class="highlight-ci"><pre>&lt;?php
class Blog extends CI_Controller {

       public function __construct()
       {
            parent::__construct();
            // Your own constructor code
       }
}
?&gt;</pre>
</div>
<p>Constructors are useful if you need to set some default values, or run a
default process when your class is instantiated. Constructors can&#8217;t
return a value, but they can do some default work.</p>
</div>
<div class="section" id="reserved-function-names">
<h2><a class="toc-backref" href="#id12">Reserved Function Names</a><a class="headerlink" href="#reserved-function-names" title="Permalink to this headline">Â¶</a></h2>
<p>Since your controller classes will extend the main application
controller you must be careful not to name your functions identically to
the ones used by that class, otherwise your local functions will
override them. See <a class="reference internal" href="reserved_names.html"><em>Reserved Names</em></a> for a full
list.</p>
</div>
<div class="section" id="that-s-it">
<h2><a class="toc-backref" href="#id13">That&#8217;s it!</a><a class="headerlink" href="#that-s-it" title="Permalink to this headline">Â¶</a></h2>
<p>That, in a nutshell, is all there is to know about controllers.</p>
</div>
</div>

		</div>

		<!-- {user_guide_comments} -->
					
		<div id="footer">
			<p class="top"><a href="#header" title="Return to top">Return to top</a></p>
			<p><a href="">CodeIgniter</a> &ndash; Copyright &copy; 2012, EllisLab, Inc.</a></p>
		</div><!-- /#footer -->
	</body>
</html>